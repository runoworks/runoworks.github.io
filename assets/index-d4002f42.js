var xt=Object.defineProperty;var Lt=(i,t,e)=>t in i?xt(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var d=(i,t,e)=>(Lt(i,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();function A(){}function ut(i){return i()}function et(){return Object.create(null)}function G(i){i.forEach(ut)}function ht(i){return typeof i=="function"}function lt(i,t){return i!=i?t==t:i!==t||i&&typeof i=="object"||typeof i=="function"}function Et(i){return Object.keys(i).length===0}function ct(i,t,e){i.insertBefore(t,e||null)}function q(i){i.parentNode&&i.parentNode.removeChild(i)}function ft(i){return document.createElement(i)}function X(i,t,e){e==null?i.removeAttribute(t):i.getAttribute(t)!==e&&i.setAttribute(t,e)}function Tt(i){return Array.from(i.childNodes)}let U;function z(i){U=i}function mt(){if(!U)throw new Error("Function called outside component initialization");return U}function St(i){mt().$$.on_mount.push(i)}function Rt(i){mt().$$.on_destroy.push(i)}const R=[],W=[];let B=[];const it=[],Ft=Promise.resolve();let J=!1;function Mt(){J||(J=!0,Ft.then(pt))}function Q(i){B.push(i)}const H=new Set;let E=0;function pt(){if(E!==0)return;const i=U;do{try{for(;E<R.length;){const t=R[E];E++,z(t),Bt(t.$$)}}catch(t){throw R.length=0,E=0,t}for(z(null),R.length=0,E=0;W.length;)W.pop()();for(let t=0;t<B.length;t+=1){const e=B[t];H.has(e)||(H.add(e),e())}B.length=0}while(R.length);for(;it.length;)it.pop()();J=!1,H.clear(),z(i)}function Bt(i){if(i.fragment!==null){i.update(),G(i.before_update);const t=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,t),i.after_update.forEach(Q)}}function Dt(i){const t=[],e=[];B.forEach(r=>i.indexOf(r)===-1?t.push(r):e.push(r)),e.forEach(r=>r()),B=t}const O=new Set;let At;function dt(i,t){i&&i.i&&(O.delete(i),i.i(t))}function It(i,t,e,r){if(i&&i.o){if(O.has(i))return;O.add(i),At.c.push(()=>{O.delete(i),r&&(e&&i.d(1),r())}),i.o(t)}else r&&r()}const zt=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];[...zt];function Ut(i){i&&i.c()}function vt(i,t,e,r){const{fragment:n,after_update:s}=i.$$;n&&n.m(t,e),r||Q(()=>{const o=i.$$.on_mount.map(ut).filter(ht);i.$$.on_destroy?i.$$.on_destroy.push(...o):G(o),i.$$.on_mount=[]}),s.forEach(Q)}function bt(i,t){const e=i.$$;e.fragment!==null&&(Dt(e.after_update),G(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function $t(i,t){i.$$.dirty[0]===-1&&(R.push(i),Mt(),i.$$.dirty.fill(0)),i.$$.dirty[t/31|0]|=1<<t%31}function gt(i,t,e,r,n,s,o,a=[-1]){const u=U;z(i);const h=i.$$={fragment:null,ctx:[],props:s,update:A,not_equal:n,bound:et(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:et(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};o&&o(h.root);let l=!1;if(h.ctx=e?e(i,t.props||{},(c,f,...p)=>{const v=p.length?p[0]:f;return h.ctx&&n(h.ctx[c],h.ctx[c]=v)&&(!h.skip_bound&&h.bound[c]&&h.bound[c](v),l&&$t(i,c)),f}):[],h.update(),l=!0,G(h.before_update),h.fragment=r?r(h.ctx):!1,t.target){if(t.hydrate){const c=Tt(t.target);h.fragment&&h.fragment.l(c),c.forEach(q)}else h.fragment&&h.fragment.c();t.intro&&dt(i.$$.fragment),vt(i,t.target,t.anchor,t.customElement),pt()}z(u)}class wt{$destroy(){bt(this,1),this.$destroy=A}$on(t,e){if(!ht(e))return A;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{const n=r.indexOf(e);n!==-1&&r.splice(n,1)}}$set(t){this.$$set&&!Et(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function rt(i,t,e){const r=i.createShader(t);if(i.shaderSource(r,e),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS)){const n=i.getShaderInfoLog(r);throw new Error(`An error occurred compiling the shaders: ${n}`)}return r}function Xt(i,t,e){const r=rt(i,i.VERTEX_SHADER,t),n=rt(i,i.FRAGMENT_SHADER,e),s=i.createProgram();if(i.attachShader(s,r),i.attachShader(s,n),i.linkProgram(s),i.deleteShader(r),i.deleteShader(n),!i.getProgramParameter(s,i.LINK_STATUS)){const o=i.getProgramInfoLog(s);throw new Error(`Unable to initialize the shader program: ${o}`)}return s}class nt{constructor(t,e,r){d(this,"gl");d(this,"program");d(this,"valid");this.gl=t,this.program=Xt(t,e,r),this.valid=!0}use(){this.valid&&this.gl.useProgram(this.program)}locate(t){if(this.valid)return this.gl.getUniformLocation(this.program,t)}destroy(){this.valid&&(this.valid=!1,this.gl.deleteProgram(this.program))}}var x=Math.pow(2,32),P=Math.pow(2,-32),Pt=Math.log(10)/(32*Math.log(2));function Ot(i){return new Array(i+1).join("0")}var Y=function(){function i(t){this.base=t,this.limbDigitsExact=Math.log(x)/Math.log(this.base),this.limbDigits=~~this.limbDigitsExact,this.limbBase=Math.pow(this.base,this.limbDigits),this.pad=Ot(this.limbDigits)}return i.init=function(t){return i.baseTbl[t]||(i.baseTbl[t]=new i(t))},i.baseTbl={},i}();function Nt(i){return i.replace(/^(-?)0+([1-9a-z]|0(\.|$))/,"$1$2").replace(/(\.|(\.[0-9a-z]*[1-9a-z]))0+$/,"$2")}var w=function(){function i(t,e){this.limbList=[],t?this.setValue(t,e):this.setZero()}return i.prototype.clone=function(){return new i().setBig(this)},i.prototype.setZero=function(){return this.sign=1,this.fractionLen=0,this.len=0,this},i.prototype.setValue=function(t,e){return typeof t=="number"?this.setNumber(t):t instanceof i?this.setBig(t):this.setString(t.toString(),e||10)},i.prototype.setBig=function(t){var e=t.len;this.sign=t.sign,this.fractionLen=t.fractionLen,this.len=e;for(var r=0;r<e;++r)this.limbList[r]=t.limbList[r];return this},i.prototype.setNumber=function(t){t<0?(t=-t,this.sign=-1):this.sign=1;for(var e=Math.floor(t),r=t-e,n=0,s=this.limbList,o,a=0;r;)r*=x,o=r>>>0,r-=o,s[a++]=o,++n;for(var u=0;--a>u;)o=s[u],s[u++]=s[a],s[a]=o;for(a+=u+1;e;)o=e%x,e=(e-o)/x,s[a++]=o;return this.limbList=s,this.fractionLen=n,this.len=a,this},i.prototype.parseFraction=function(t,e,r,n,s,o){for(var a=this.limbList,u=t.length,h=n-1;h;)a[--h]=0;var l=u-((u-r+o-1)%o+1);for(a[n-1]=parseInt(t.substr(l,u-l),e),this.divInt(Math.pow(e,u-l),n),u=l;u>r;)u-=o,a[n-1]=parseInt(t.substr(u,o),e),this.divInt(s,n)},i.prototype.setString=function(t,e){var r=Y.init(e),n=r.limbBase,s=r.limbDigits,o=r.limbDigitsExact,a=this.limbList,u=-1,h;for(this.sign=1;;){switch(h=t.charAt(++u),h){case"-":this.sign=-1;case"+":case"0":continue}break}var l=(t.indexOf(".",u)+1||t.length+1)-1;if(l<t.length-1){var c=~~((t.length-l-1)/o)+1;this.parseFraction(t,e,l+1,c+1,n,s),this.fractionLen=c,this.len=c,this.trimLeast()}else this.fractionLen=0,this.len=0;var f=this.fractionLen;if(l>u){var p=u+(l-u+s-1)%s+1;for(++this.len,a[f]=parseInt(t.substr(u,p-u),e),u=p;u<l;)this.mulInt(n,a,f,f,0)&&++this.len,a[f]+=parseInt(t.substr(u,s),e),u+=s}return this},i.prototype.trimMost=function(){for(var t=this.limbList,e=this.fractionLen,r=this.len;r>e&&!t[r-1];)--r;this.len=r},i.prototype.trimLeast=function(){for(var t=this.limbList,e=this.fractionLen,r=0;r<e&&!t[r];)++r;r&&this.truncate(e-r)},i.prototype.mulInt=function(t,e,r,n,s){if(!t)return 0;for(var o=this.limbList,a=this.len,u,h,l=0;r<a;)u=o[r++],l+=t*(u&65535),h=l&65535,l=(l-h)/65536,l+=t*(u>>>16),h|=l<<16,u=(e[n]&s)+h>>>0,e[n++]=u,l=l/65536>>>0,l+=(h^(u-h^h)&~(u^h))>>>31;return l&&(e[n]=l),l},i.prototype.mulBig=function(t,e){if(this.isZero()||t.isZero())return e.setZero();var r=t.limbList,n=t.len,s=e.limbList,o=this.len+n;for(e.len=o;o--;)s[o]=0;this.mulInt(r[0],s,0,0,0);for(var a=1;a<n;++a)this.mulInt(r[a],s,0,a,4294967295);return e.sign=this.sign*t.sign,e.fractionLen=this.fractionLen+t.fractionLen,e.trimMost(),e.trimLeast(),e},i.prototype.mul=function(t,e){if(e=e||new i,typeof t=="number"&&(t=T.setNumber(t)),e==this)throw new Error("Multiplication in place is unsupported");return this.mulBig(t,e)},i.prototype.absDeltaFrom=function(t){typeof t=="number"&&(t=T.setNumber(t));for(var e=this.limbList,r=t.limbList,n=this.len,s=t.len,o=n-this.fractionLen-(s-t.fractionLen);!o&&n&&s;)o=e[--n]-r[--s];if(o)return o;if(n)do o=e[--n];while(!o&&n);else if(s)do o=-r[--s];while(!o&&s);return o},i.prototype.isZero=function(){return this.len==0},i.prototype.getSign=function(){return this.len&&this.sign},i.prototype.deltaFrom=function(t){return typeof t=="number"&&(t=T.setNumber(t)),this.len+t.len&&(this.sign-t.sign||this.absDeltaFrom(t)*this.sign)},i.prototype.addBig=function(t,e){var r=this,n=r.fractionLen,s=n-t.fractionLen;s<0&&(s=-s,n+=s,r=t,t=this),e.sign=this.sign,e.fractionLen=n;for(var o=e.limbList,a=r.limbList,u=t.limbList,h=0,l=0,c=0,f;h<s;)o[h]=a[h],++h;var p=t.len;for(s=r.len-h,s>p&&(s=p);l<s;)c+=a[h]+u[l++],f=c>>>0,c=c-f&&1,o[h++]=f;var v=h;for(s<p?(s=p,r=t,h=l,a=u):s=r.len;h<s;)c+=a[h++],f=c>>>0,c=c-f&&1,o[v++]=f;return c&&(o[v++]=c),e.len=v,e.trimLeast(),e},i.prototype.subBig=function(t,e){var r=this;e.sign=this.sign,r.absDeltaFrom(t)<0&&(r=t,t=this,e.sign=-this.sign);var n=r.fractionLen,s=n-t.fractionLen,o=e.limbList,a=r.limbList,u=t.limbList,h=r.len,l=t.len,c=h,f=0,p=0,v=0,m=0,b;if(s>=0){for(;f<s;)o[f]=a[f],++f;s+=l,s>h&&(s=h),v=f}else{for(s=-s,n+=s,c+=s;p<s;)m-=u[p],b=m>>>0,m=-(m<0),o[p++]=b;s+=h,s>l&&(s=l),v=p}for(e.fractionLen=n;v<s;)m+=a[f++]-u[p++],b=m>>>0,m=-(m<0),o[v++]=b;for(;v<c;)m+=a[f++],b=m>>>0,m=-(m<0),o[v++]=b;return e.len=v,e.trimMost(),e.trimLeast(),e},i.prototype.addSub=function(t,e,r){if(r=r||new i,r==this)throw new Error("Addition and subtraction in place is unsupported");return typeof t=="number"&&(t=T.setNumber(t)),this.sign*t.sign*e<0?this.subBig(t,r):this.addBig(t,r)},i.prototype.add=function(t,e){return this.addSub(t,1,e)},i.prototype.sub=function(t,e){return this.addSub(t,-1,e)},i.prototype.truncate=function(t){var e=this.fractionLen-t;if(e>0){this.fractionLen=t,this.len-=e;for(var r=this.len,n=this.limbList,s=0;s<r;++s)n[s]=n[s+e]}return this},i.prototype.round=function(t){return this.truncate(1+~~(t*Pt))},i.prototype.divInt=function(t,e){var r=this.limbList,n,s,o,a=0;for(r[e-1]<t&&(a=r[--e],this.len=e);e--;)n=r[e],a=a*65536+(n>>>16),s=a/t>>>0,a=a-s*t,a=a*65536+(n&65535),o=a/t>>>0,a=a-o*t,r[e]=(s<<16|o)>>>0;return a},i.prototype.fractionToString=function(t,e){var r=Y.init(t),n=r.pad,s=r.limbBase,o=this.limbList,a=this.fractionLen,u=0,h;if(t&1)throw new Error("Conversion of floating point values to odd bases is unsupported");for(;u<a&&!o[u];)++u;if(!(u>=a)){e.push(".");var l=T;for(l.limbList=o.slice(u,a),l.len=a-u,u=0;u<l.len;)if(l.limbList[u]){var c=l.mulInt(s,l.limbList,u,u,0);h=c.toString(t),e.push(n.substr(h.length)+h)}else++u}},i.prototype.getExpansion=function(t){for(var e=this.limbList,r=this.len,n=this.sign,s=this.fractionLen;s--;)n*=P;for(;++s<r;)t[s]=e[s]*n,n*=x;return r},i.prototype.valueOf=function(){for(var t=this.limbList,e=0,r=P*this.sign,n=this.fractionLen,s=0;s<n;)e=e*P+t[s++];for(n=this.len;s<n;)e=e*P+t[s++],r*=x;return e*r},i.prototype.toString=function(t){t===void 0&&(t=10);var e=Y.init(t),r=e.pad,n=e.limbBase,s=[],o=this.limbList,a;if(n!=x){var u=T;for(u.limbList=o.slice(this.fractionLen,this.len),u.len=this.len-this.fractionLen;u.len>1;)a=u.divInt(n,u.len).toString(t),s.push(r.substr(a.length)+a);s.push(""+(u.limbList[0]||0)),this.sign<0&&s.push("-"),s.reverse(),this.fractionToString(t,s)}else{var h=this.len,l=this.fractionLen;for(this.sign<0&&s.push("-"),h==l&&s.push("0");h--;)a=o[h].toString(t),h==l-1&&s.push("."),s.push(r.substr(a.length)+a)}return Nt(s.join(""))},i}();w.prototype.cmp=w.prototype.deltaFrom;var T=new w,st=(1<<27)+1,Ct=Math.log(10)/(53*Math.log(2));function Zt(i,t,e){var r=i+t,n=r-i,s=r-n;return e[0]=i-s+(t-n),e[1]=r,e}function k(i,t){F=i*t;var e=i*st,r=e-(e-i),n=i-r,s=t*st,o=s-(s-t),a=t-o;return n*a-(F-r*o-n*o-r*a)}var L=function(){function i(t,e){this.limbList=[],t&&this.setValue(t,e)}return i.prototype.clone=function(){return new i().setBig(this)},i.prototype.setZero=function(){return this.len=0,this},i.prototype.setValue=function(t,e){return typeof t=="number"?this.setNumber(t):t instanceof i?this.setBig(t):this.setString(t.toString(),e||10)},i.prototype.setBig=function(t){var e=t.len;this.len=e;for(var r=0;r<e;++r)this.limbList[r]=t.limbList[r];return this},i.prototype.setNumber=function(t){return this.limbList[0]=t,this.len=t&&1,this},i.prototype.setString=function(t,e){return S[0].setValue(t,e),this.len=S[0].getExpansion(this.limbList),this.normalize(),this},i.prototype.setSum=function(t,e){return this.len=2,Zt(t,e,this.limbList),this},i.prototype.setProduct=function(t,e){return this.len=2,this.limbList[0]=k(t,e),this.limbList[1]=F,this},i.prototype.normalize=function(){var t=this.limbList,e=this.len,r;if(e){for(var n=e-1,s=e-1,o=t[n],a=void 0;n;)r=t[--n],a=o,o+=r,a=r-(o-a),t[s]=o,s-=a&&1,o=a||o;for(t[s]=o;++s<e;)r=t[s],a=o,o+=r,a-=o-r,t[n]=a,n+=a&&1;t[n]=o,this.len=n+(o&&1)}return this},i.prototype.mulSmall=function(t,e){var r=this.limbList,n=e.limbList,s=this.len,o,a,u,h=0,l=0;function c(p){n[l]=p,l+=p&&1}c(k(r[h++],t));for(var f=F;h<s;)o=k(r[h++],t),a=f+o,u=a-f,c(f-(a-u)+(o-u)),f=F+a,c(a-(f-F));return n[l]=f,e.len=l+(f&&1),e},i.prototype.mulBig=function(t,e){var r=t.limbList,n=t.len;if(!n)return e.setZero();for(--n,this.mulSmall(r[n],n?_[n&1]:e);n;)--n,this.mulSmall(r[n],e).addBig(_[~n&1],1,n?_[n&1]:e);return e},i.prototype.mul=function(t,e){if(e=e||new i,typeof t=="number")return this.mulSmall(t,e);if(e==this)throw new Error("Cannot multiply in place");return this.mulBig(t,e)},i.prototype.isZero=function(){for(var t=this.limbList,e=this.len;e--;)if(t[e])return!1;return!0},i.prototype.getSign=function(){var t=this.len;return t&&(t=this.limbList[t-1])&&(t>0?1:-1)},i.prototype.deltaFrom=function(t){var e=this.len,r=this.getSign(),n=r;if(typeof t!="number"){if(e=t.len,n-=e&&(e=t.limbList[e-1])&&(e>0?1:-1),n||!r)return n;this.addBig(t,-1,_[0])}else{if(n-=t&&(t>0?1:-1),n||!r)return n;this.addSmall(-t,_[0])}return e=_[0].len,e&&_[0].limbList[e-1]},i.prototype.addSmall=function(t,e){for(var r=this.limbList,n=e.limbList,s=this.len,o,a,u,h,l=0,c=0;l<s;)a=r[l++],o=a+t,u=o-a,a-=o-u,h=a+(t-u),n[c]=h,c+=h&&1,t=o;return n[c]=t,e.len=c+(t&&1),e},i.prototype.addBig=function(t,e,r){var n=this.limbList,s=t.limbList,o=r.limbList,a=this.len+t.len,u=0,h=0,l=0,c=n[u++],f=s[h++]*e,p=c<0?-c:c,v=f<0?-f:f,m,b,I,g;if(!a)return r.setZero();n[this.len]=1/0,s[t.len]=1/0;function $(){var j;return p<v?(j=c,c=n[u++],p=c<0?-c:c):(j=f,f=s[h++]*e,v=f<0?-f:f),j}for(var y=$();--a;)m=$(),I=y,y+=m,b=y-I,g=I-(y-b)+(m-b),o[l]=g,l+=g&&1;return o[l]=y,r.len=l+(y&&1),r},i.prototype.addSub=function(t,e,r){return r=r||new i,typeof t=="number"?this.addSmall(e*t,r):this.addBig(t,e,r)},i.prototype.add=function(t,e){return this.addSub(t,1,e)},i.prototype.sub=function(t,e){return this.addSub(t,-1,e)},i.prototype.truncate=function(t){this.normalize();for(var e=this.limbList,r=this.len,n=0,s=r,o=0,a=0;n<s;)o=n+s>>1,a=e[o],a>-1&&a<1?n=o+1:s=o;if(o&&(a<=-1||a>=1)&&(a=e[--o]),o-=t-1,o>0){this.len-=o,r=this.len;for(var u=0;u<r;++u)e[u]=e[u+o]}return this},i.prototype.round=function(t){return this.truncate(1+~~(t*Ct))},i.prototype.valueOf=function(){for(var t=this.limbList,e=this.len,r=0,n=0;n<e;++n)r+=t[n];return r},i.prototype.toString=function(t){var e=this.limbList,r=this.len;for(S[r&1].setZero();r--;)S[~r&1].add(e[r],S[r&1]);return S[~r&1].toString(t)},i}();L.prototype.cmp=L.prototype.deltaFrom;var F=0,S=[new w,new w],_=[new L,new L];function yt(i,t){function e(){this.constructor=i}e.prototype=t.prototype,i.prototype=new e}var _t=function(){function i(t,e,r){this.real=typeof t=="object"?t:new this.Base(t,r),this.imag=typeof e=="object"?e:new this.Base(e,r)}return i.prototype.clone=function(){var t=new this.constructor(this.real.clone(),this.imag.clone());return t},i.prototype.setZero=function(){return this.real.setZero(),this.imag.setZero(),this},i.prototype.setValue=function(t){return this.real.setValue(t.real),this.imag.setValue(t.imag),this},i.prototype.mul=function(t,e){return e=e||new this.constructor,t instanceof i?(this.real.mul(t.real,this.temp1),this.imag.mul(t.imag,this.temp2),this.temp1.sub(this.temp2,e.real),this.real.mul(t.imag,this.temp1),this.imag.mul(t.real,this.temp2),this.temp1.add(this.temp2,e.imag)):(this.real.mul(t,e.real),this.imag.mul(t,e.imag)),e},i.prototype.sqr=function(t){return t=t||new this.constructor,this.real.mul(this.real,this.temp1),this.imag.mul(this.imag,this.temp2),this.temp1.sub(this.temp2,t.real),this.real.mul(this.imag,this.temp1),this.temp1.add(this.temp1,t.imag),t},i.prototype.add=function(t,e){return e=e||new this.constructor,t instanceof i?(this.real.add(t.real,e.real),this.imag.add(t.imag,e.imag)):this.real.add(t,e.real),e},i.prototype.sub=function(t,e){return e=e||new this.constructor,t instanceof i?(this.real.sub(t.real,e.real),this.imag.sub(t.imag,e.imag)):this.real.sub(t,e.real),e},i.prototype.truncate=function(t){return this.real.truncate(t),this.imag.truncate(t),this},i}(),V=function(i){yt(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t}(_t),tt=function(i){yt(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t}(_t);V.prototype.Base=w;V.prototype.temp1=new w;V.prototype.temp2=new w;tt.prototype.Base=L;tt.prototype.temp1=new L;tt.prototype.temp2=new L;class ot extends w{constructor(t){super(t,2)}}class K extends V{constructor(t,e){super(t,e,2)}}function at(i,t){let e,r=Math.abs(i),n=Math.abs(t);return e=Math.min(r,n),r=Math.max(r,n),e=e/r,i==0&&t==0?0:r*Math.sqrt(1+e*e)}class D{constructor(t,e,r){d(this,"x");d(this,"y");d(this,"width");this.width=r!==void 0?r:1;const n=this.precision;this.x=typeof t=="number"?new ot(t):t.truncate(n),this.y=typeof e=="number"?new ot(e):e.truncate(n)}get precision(){return Math.ceil(Math.max(1,-Math.log2(this.width*1e-5)/32))}toString(){return`(${this.x.toString()}, ${this.y.toString()}, ${this.width.toExponential()})`}clone(){return new D(this.x,this.y,this.width)}distance(t){const[e,r]=[this.width,t.width],[n,s]=[this.x.sub(t.x).valueOf(),this.y.sub(t.y).valueOf()];return 2*Math.asinh(at(at(n,s),e-r)/(2*Math.sqrt(e)*Math.sqrt(r)))}}const C=class extends D{constructor(e,r){super(e.x,e.y,e.width);d(this,"orbit");d(this,"iterations");d(this,"maxiter");this.maxiter=r,this.orbit=new Float32Array(2*r),this.iterations=this.compute();const n=this.iterations,[s,o]=[Math.min(n,16384),1+Math.floor(n/16384)];this.orbit=this.orbit.subarray(0,2*s*o)}compute(){const e=this.orbit,r=this.precision;let n=new K(this.x,this.y),s=new K(0,0),o=new K(0,0);for(let a=0;a<this.maxiter;a++){if(e[2*a+0]=s.real.valueOf(),e[2*a+1]=s.imag.valueOf(),Math.abs(o.real.valueOf())+Math.abs(o.imag.valueOf())>C.bailout)return a;s=o.add(n),o=s.sqr().truncate(r)}return this.maxiter}isInRange(e){return this.distance(e)<C.threshold}};let M=C;d(M,"bailout",64),d(M,"threshold",7);const Z=class{constructor(t,e,r,n,s,o){d(this,"gl");d(this,"colorsh");d(this,"computesh");d(this,"framebuffer");d(this,"computeTexture");d(this,"orbitTexture");d(this,"width");d(this,"height");d(this,"camera");d(this,"reference");d(this,"scale");this.gl=t,this.computesh=new nt(t,e,n),this.colorsh=new nt(t,e,r),this.width=s,this.height=o,this.computeTexture=t.createTexture(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.computeTexture),t.texImage2D(t.TEXTURE_2D,0,t.R32F,this.width,this.height,0,t.RED,t.FLOAT,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.bindTexture(t.TEXTURE_2D,null),this.orbitTexture=t.createTexture(),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this.orbitTexture),t.texImage2D(t.TEXTURE_2D,0,t.RG32F,1,1,0,t.RG,t.FLOAT,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.bindTexture(t.TEXTURE_2D,null),this.framebuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.computeTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null),this.camera=new D(-.75,0,4),this.updateReference(this.camera,1e3),this.updateScale()}toPlaneCoords(t,e){const r=this.height/this.width;return[this.camera.width*t,this.camera.width*e*r]}updateScale(){this.scale=this.camera.width<Z.scaleFactor?Z.scaleFactor:1}updateReference(t,e){this.reference=new M(t,e);const r=this.reference.iterations,[n,s]=[Math.min(r,16384),1+Math.floor(r/16384)],o=this.gl;o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,this.orbitTexture),o.texImage2D(o.TEXTURE_2D,0,o.RG32F,n,s,0,o.RG,o.FLOAT,this.reference.orbit)}move(t,e){[t,e]=this.toPlaneCoords(t,e),this.camera=new D(this.camera.x.add(t),this.camera.y.add(e),this.camera.width),this.reference.isInRange(this.camera)||this.updateReference(this.camera,this.reference.maxiter)}zoom(t,e,r){[t,e]=this.toPlaneCoords(t,e),this.camera=new D(this.camera.x.add((1-r)*t),this.camera.y.add((1-r)*e),this.camera.width*r),this.updateScale(),this.reference.isInRange(this.camera)||this.updateReference(this.camera,this.reference.maxiter)}draw(){const t=this.gl;t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.computeTexture),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this.orbitTexture);const e=this.camera,r=this.reference,[n,s]=[e.x.sub(r.x).valueOf(),e.y.sub(r.y).valueOf()];this.computesh.use(),t.uniform2f(this.computesh.locate("u_resolution"),this.width,this.height),t.uniform2f(this.computesh.locate("u_delta"),n/this.scale,s/this.scale),t.uniform1f(this.computesh.locate("u_scale"),this.scale),t.uniform1f(this.computesh.locate("u_angle"),0),t.uniform1f(this.computesh.locate("u_width"),this.camera.width/this.scale),t.uniform1f(this.computesh.locate("u_frame"),0),t.uniform1i(this.computesh.locate("u_maxiter"),this.reference.maxiter),t.uniform1i(this.computesh.locate("u_refiter"),this.reference.iterations-1),t.uniform1f(this.computesh.locate("u_escape"),M.bailout),t.uniform1i(this.computesh.locate("u_orbit"),1),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),t.viewport(0,0,this.width,this.height),t.drawArrays(t.TRIANGLES,0,3),this.colorsh.use(),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,this.width,this.height),t.drawArrays(t.TRIANGLES,0,3)}resize(t,e){const r=this.gl;r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.computeTexture),r.texImage2D(r.TEXTURE_2D,0,r.R32F,t,e,0,r.RED,r.FLOAT,null),r.bindTexture(r.TEXTURE_2D,null),this.width=t,this.height=e}destroy(){this.colorsh.destroy(),this.computesh.destroy(),this.gl.deleteFramebuffer(this.framebuffer),this.gl.deleteTexture(this.computeTexture),this.gl.deleteTexture(this.orbitTexture)}};let N=Z;d(N,"scaleFactor",125e-37);const Gt=`#version 300 es\r
\r
#ifdef GL_ES\r
precision highp float;\r
precision highp int;\r
#endif\r
\r
uniform vec2 u_resolution;\r
uniform vec2 u_delta;\r
uniform float u_scale;\r
uniform float u_angle;\r
uniform float u_width;\r
uniform float u_frame;\r
\r
uniform int u_maxiter;\r
uniform int u_refiter;\r
uniform float u_escape;\r
uniform sampler2D u_orbit;\r
\r
in vec2 uv;\r
out float out_value;\r
\r
float hypot(vec2 z) {\r
    float t;\r
    float x = abs(z.x);\r
    float y = abs(z.y);\r
    t = min(x, y);\r
    x = max(x, y);\r
    t = t / x;\r
    return (z.x == 0.0 && z.y == 0.0) ? 0.0 : x * sqrt(1.0 + t * t);\r
}\r
\r
float rand(float s) {\r
    return fract(sin(s * 12.9898) * 43758.5453);\r
}\r
\r
vec2 cmul(vec2 z, vec2 w) {\r
    return mat2(z, -z.y, z.x) * w;\r
}\r
\r
float perturb(const vec2 dc) {\r
    vec2 c = texelFetch(u_orbit, ivec2(1, 0), 0).xy + u_scale * dc;\r
    float m1 = hypot(c - vec2(0.25, 0.0));\r
    float m2 = hypot(c + vec2(1.0, 0.0));\r
    if(2.0 * m1 < 1.0 - (c.x - 0.25) / m1 || m2 < 0.25)\r
        return 0.0;\r
\r
    vec2 dz = vec2(0.0);\r
    float mz = 0.0;\r
    float tex_i = 0.0;\r
    int ref_i = 0;\r
    \r
    float tex_width = float(1 << 14);\r
    vec2 tex_coord = vec2(0.0);\r
\r
    for (int i = 0; i < u_maxiter; i++) {\r
        vec2 Z = texelFetch(u_orbit, ivec2(tex_coord), 0).xy;\r
        dz = cmul(Z + Z + u_scale * dz, dz) + dc;\r
        ref_i += 1;\r
        tex_i += 1.0;\r
        \r
        float temp = float(tex_i > tex_width);\r
        tex_coord = vec2(1.0 - temp, 1.0) * (tex_coord + vec2(1.0, temp));\r
        tex_i *= 1.0 - temp;\r
\r
        float mdz = u_scale * hypot(dz);\r
        vec2 z = texelFetch(u_orbit, ivec2(tex_coord), 0).xy + u_scale * dz;\r
        mz = hypot(z);\r
        if (mz > u_escape) {\r
            return float(i) - log2(log(mz) / log(u_escape));\r
        } else if (mz < mdz || ref_i == u_refiter) {\r
            dz = z / u_scale;\r
            ref_i = 0;\r
            tex_i = 0.0;\r
            tex_coord = vec2(0.0);\r
        }\r
    }\r
    return 0.0;\r
}\r
\r
void main() {\r
    float aspect = u_resolution.y / u_resolution.x;\r
    vec2 rot = vec2(cos(u_angle), sin(u_angle));\r
    mat2 transform = u_width * mat2(rot, -aspect * rot.y, aspect * rot.x);\r
    vec2 pixel = vec2(u_width / u_resolution.x);\r
    vec2 dc = u_delta + transform * (uv - 0.5);\r
    vec2 dxy = 0.354 * pixel * vec2(rand(0.54321 + u_frame), rand(0.12345 + u_frame));\r
    out_value = perturb(dc + dxy);\r
}`,Vt=`#version 300 es\r
\r
#ifdef GL_ES\r
precision highp float;\r
precision highp int;\r
#endif\r
\r
in vec2 uv;\r
out vec4 out_color;\r
\r
uniform float time;\r
uniform sampler2D sampler;\r
\r
const float GAMMA = 2.2;\r
\r
vec3 palette(in float t, in vec3 a, in vec3 b, in vec3 c, in vec3 d) {\r
    return a + b * cos(6.28318 * (c * t + d));\r
}\r
\r
void main() {\r
    float t = texture(sampler, uv).x;\r
	vec3 col = t == 0.0 ? vec3(0.0) : palette(0.5 + 0.003 * t, vec3(0.5), vec3(0.5), vec3(1.0), vec3(0.0, 0.1, 0.2));\r
	out_color = vec4(col, 1.0);\r
}`,jt=`#version 300 es\r
\r
out vec2 uv;\r
\r
void main() {\r
	float x = -1.0 + float((gl_VertexID & 1) << 2);\r
	float y = -1.0 + float((gl_VertexID & 2) << 1);\r
	uv = 0.5 * vec2(x, -y) + 0.5;\r
	gl_Position = vec4(x, y, 0.0, 1.0);\r
}`;function Ht(i){let t;return{c(){t=ft("canvas"),X(t,"width",i[0]),X(t,"height",i[1])},m(e,r){ct(e,t,r),i[3](t)},p(e,[r]){r&1&&X(t,"width",e[0]),r&2&&X(t,"height",e[1])},i:A,o:A,d(e){e&&q(t),i[3](null)}}}function Yt(i,t,e){let{width:r=1}=t,{height:n=1}=t,s,o,a=!1,[u,h]=[0,0];function l(m){m.preventDefault(),a=!0}function c(m){if(m.ctrlKey)return;m.preventDefault();const b=-m.deltaY/100;s.zoom(u,h,Math.pow(.75,b)),s.draw()}function f(m){a&&(a=!1)}function p(m){const[b,I]=[m.clientX,m.clientY],g=o.getBoundingClientRect();if(u=-.5+(b-g.x)/g.width,h=.5-(I-g.y)/g.height,!a)return;m.preventDefault();let[$,y]=[m.movementX,m.movementY];s.move(-$/g.width,y/g.height),s.draw()}St(async()=>{const m=o.getContext("webgl2",{powerPreference:"high-performance"});if(m===null)throw new Error("Unable to initialize WebGL2. Your browser or machine may not support it.");if(m.getExtension("EXT_color_buffer_float")==null)throw new Error("EXT_color_buffer_float not supported");s=new N(m,jt,Vt,Gt),s.resize(r,n),s.draw(),o.addEventListener("mousedown",l),o.addEventListener("wheel",c),window.addEventListener("mouseup",f),window.addEventListener("mousemove",p)}),Rt(()=>{s.destroy(),window.removeEventListener("mouseup",f),window.removeEventListener("mousemove",p)});function v(m){W[m?"unshift":"push"](()=>{o=m,e(2,o)})}return i.$$set=m=>{"width"in m&&e(0,r=m.width),"height"in m&&e(1,n=m.height)},[r,n,o,v]}class kt extends wt{constructor(t){super(),gt(this,t,Yt,Ht,lt,{width:0,height:1})}}function Kt(i){let t,e,r;return e=new kt({props:{width:800,height:600}}),{c(){t=ft("main"),Ut(e.$$.fragment)},m(n,s){ct(n,t,s),vt(e,t,null),r=!0},p:A,i(n){r||(dt(e.$$.fragment,n),r=!0)},o(n){It(e.$$.fragment,n),r=!1},d(n){n&&q(t),bt(e)}}}class Wt extends wt{constructor(t){super(),gt(this,t,null,Kt,lt,{})}}new Wt({target:document.getElementById("app")});
